<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Anonymize Patient Data in a Data Frame — anonymize_dataframe • privacyR</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Anonymize Patient Data in a Data Frame — anonymize_dataframe"><meta name="description" content="Main function to anonymize patient data in a data frame or data.table.
Automatically detects and anonymizes columns based on data types and naming
patterns, or you can manually specify columns. Different datasets get
different anonymized values for better privacy."><meta property="og:description" content="Main function to anonymize patient data in a data frame or data.table.
Automatically detects and anonymizes columns based on data types and naming
patterns, or you can manually specify columns. Different datasets get
different anonymized values for better privacy."><meta property="og:image" content="https://vikrant31.github.io/privacyR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">privacyR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/privacyR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Anonymize Patient Data in a Data Frame</h1>
      <small class="dont-index">Source: <a href="https://github.com/vikrant31/privacyR/blob/main/R/anonymize_dataframe.R" class="external-link"><code>R/anonymize_dataframe.R</code></a></small>
      <div class="d-none name"><code>anonymize_dataframe.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Main function to anonymize patient data in a data frame or data.table.
Automatically detects and anonymizes columns based on data types and naming
patterns, or you can manually specify columns. Different datasets get
different anonymized values for better privacy.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">anonymize_dataframe</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  id_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  location_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  age_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  auto_detect <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  detect_by_type <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  date_method <span class="op">=</span> <span class="st">"shift"</span>,</span>
<span>  date_granularity <span class="op">=</span> <span class="st">"month"</span>,</span>
<span>  location_method <span class="op">=</span> <span class="st">"generalize"</span>,</span>
<span>  age_method <span class="op">=</span> <span class="st">"10year"</span>,</span>
<span>  use_uuid <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dataset_specific <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame or data.table containing patient data</p></dd>


<dt id="arg-id-cols">id_cols<a class="anchor" aria-label="anchor" href="#arg-id-cols"></a></dt>
<dd><p>Character vector of column names containing patient IDs</p></dd>


<dt id="arg-name-cols">name_cols<a class="anchor" aria-label="anchor" href="#arg-name-cols"></a></dt>
<dd><p>Character vector of column names containing patient names</p></dd>


<dt id="arg-date-cols">date_cols<a class="anchor" aria-label="anchor" href="#arg-date-cols"></a></dt>
<dd><p>Character vector of column names containing dates</p></dd>


<dt id="arg-location-cols">location_cols<a class="anchor" aria-label="anchor" href="#arg-location-cols"></a></dt>
<dd><p>Character vector of column names containing locations</p></dd>


<dt id="arg-age-cols">age_cols<a class="anchor" aria-label="anchor" href="#arg-age-cols"></a></dt>
<dd><p>Character vector of column names containing ages</p></dd>


<dt id="arg-auto-detect">auto_detect<a class="anchor" aria-label="anchor" href="#arg-auto-detect"></a></dt>
<dd><p>Logical, if TRUE (default), automatically detects columns
based on data types and common naming patterns</p></dd>


<dt id="arg-detect-by-type">detect_by_type<a class="anchor" aria-label="anchor" href="#arg-detect-by-type"></a></dt>
<dd><p>Logical, if TRUE (default), detects columns by their
R data types (Date, character, etc.) in addition to name patterns</p></dd>


<dt id="arg-date-method">date_method<a class="anchor" aria-label="anchor" href="#arg-date-method"></a></dt>
<dd><p>Method for date anonymization: "shift" or "round" (default: "shift").
Use "round" to enable granularity options including "month_year" (YYYYMM format).</p></dd>


<dt id="arg-date-granularity">date_granularity<a class="anchor" aria-label="anchor" href="#arg-date-granularity"></a></dt>
<dd><p>For date rounding (when date_method = "round"): "day", "week", "month",
"month_year" (returns YYYYMM format, e.g., "202005"), "quarter", or "year" (default: "month")</p></dd>


<dt id="arg-location-method">location_method<a class="anchor" aria-label="anchor" href="#arg-location-method"></a></dt>
<dd><p>Method for location anonymization: "remove" or "generalize"</p></dd>


<dt id="arg-age-method">age_method<a class="anchor" aria-label="anchor" href="#arg-age-method"></a></dt>
<dd><p>Method for age anonymization: "10year" (default) uses 10-year buckets
(0-9, 10-19, 20-29, ..., 80-89, 90+) for better research utility, or "hipaa" for
HIPAA-compliant buckets (0-17, 18-64, 65-89, 90+)</p></dd>


<dt id="arg-use-uuid">use_uuid<a class="anchor" aria-label="anchor" href="#arg-use-uuid"></a></dt>
<dd><p>Logical, if TRUE uses short UUIDs for IDs, names, and locations
instead of sequential identifiers (default: TRUE). Dates and ages are not affected.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>An optional seed for reproducible anonymization. Different
datasets will still get different anonymized values even with the same seed.</p></dd>


<dt id="arg-dataset-specific">dataset_specific<a class="anchor" aria-label="anchor" href="#arg-dataset-specific"></a></dt>
<dd><p>Logical, if TRUE (default), generates dataset-specific
seeds so different datasets get different anonymized values</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with anonymized patient data (preserves data.table class if input was data.table)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Basic usage with auto-detection</span></span></span>
<span class="r-in"><span><span class="va">patient_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  patient_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"P001"</span>, <span class="st">"P002"</span>, <span class="st">"P003"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"John Doe"</span>, <span class="st">"Jane Smith"</span>, <span class="st">"Bob Johnson"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  dob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1980-01-15"</span>, <span class="st">"1975-03-20"</span>, <span class="st">"1990-06-10"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"New York, NY"</span>, <span class="st">"Los Angeles, CA"</span>, <span class="st">"Chicago, IL"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  diagnosis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"A"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">anonymize_dataframe</span><span class="op">(</span><span class="va">patient_data</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    patient_id             name        dob          location diagnosis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 ID_ouSbzEgq Patient_6k2nsVas 1980-02-23 Location_Q98vAvyL         A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 ID_E9JiNTER Patient_7g3kma75 1975-04-28 Location_sBSspjmx         B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 ID_H9dZM6iQ Patient_A7K9Ea9J 1990-07-19 Location_8MA8fu9H         A</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With month_year date granularity (YYYYMM format)</span></span></span>
<span class="r-in"><span><span class="fu">anonymize_dataframe</span><span class="op">(</span><span class="va">patient_data</span>, date_method <span class="op">=</span> <span class="st">"round"</span>, date_granularity <span class="op">=</span> <span class="st">"month_year"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    patient_id             name    dob          location diagnosis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 ID_w2EsGPA6 Patient_wfvcEyLg 198001 Location_BKPB9n3n         A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 ID_qLcguMtS Patient_pA3Na8gU 197503 Location_peX4F6Vi         B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 ID_apswz96L Patient_6mNgRVDu 199006 Location_zx9FzuBK         A</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Works with data.table</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"data.table"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="va">patient_data</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">anonymize_dataframe</span><span class="op">(</span><span class="va">dt</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     patient_id             name        dob          location diagnosis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;char&gt;           &lt;char&gt;     &lt;Date&gt;            &lt;char&gt;    &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: ID_w2EsGPA6 Patient_wfvcEyLg 1980-09-10 Location_BKPB9n3n         A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: ID_qLcguMtS Patient_pA3Na8gU 1975-11-14 Location_peX4F6Vi         B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: ID_apswz96L Patient_6mNgRVDu 1991-02-04 Location_zx9FzuBK         A</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With UUID anonymization (default)</span></span></span>
<span class="r-in"><span><span class="fu">anonymize_dataframe</span><span class="op">(</span><span class="va">patient_data</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    patient_id             name        dob          location diagnosis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 ID_ouSbzEgq Patient_6k2nsVas 1980-02-23 Location_Q98vAvyL         A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 ID_E9JiNTER Patient_7g3kma75 1975-04-28 Location_sBSspjmx         B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 ID_H9dZM6iQ Patient_A7K9Ea9J 1990-07-19 Location_8MA8fu9H         A</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Without UUID (sequential IDs)</span></span></span>
<span class="r-in"><span><span class="fu">anonymize_dataframe</span><span class="op">(</span><span class="va">patient_data</span>, use_uuid <span class="op">=</span> <span class="cn">FALSE</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   patient_id         name        dob      location diagnosis</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     ID3663 Patient 3663 1980-02-23 Location 3663         A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     ID3664 Patient 3664 1975-04-28 Location 3664         B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     ID3665 Patient 3665 1990-07-19 Location 3665         A</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vikrant Dev Rathore.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

